<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHub Self-hosted Runner å®Œæ•´éƒ¨ç½²æµç¨‹</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft YaHei', 'PingFang SC', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
            padding: 40px 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 60px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            font-size: 36px;
            color: #1a1a1a;
            margin-bottom: 10px;
            font-weight: 700;
        }
        
        .subtitle {
            font-size: 14px;
            color: #666;
            margin-bottom: 40px;
            padding: 12px;
            background: #f5f5f5;
            border-left: 4px solid #2196F3;
            border-radius: 4px;
        }
        
        h2 {
            font-size: 24px;
            color: #1a1a1a;
            margin-top: 50px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #2196F3;
        }
        
        h3 {
            font-size: 18px;
            color: #2c3e50;
            margin-top: 25px;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        h4 {
            font-size: 15px;
            color: #34495e;
            margin-top: 15px;
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        p {
            margin-bottom: 15px;
            font-size: 14px;
            line-height: 1.8;
        }
        
        .info-box {
            padding: 20px;
            margin: 20px 0;
            border-radius: 6px;
            border-left: 5px solid;
            background-color: #f5f5f5;
        }
        
        .info-box.success {
            background-color: #e8f5e9;
            border-left-color: #4CAF50;
        }
        
        .info-box.info {
            background-color: #e3f2fd;
            border-left-color: #2196F3;
        }
        
        .info-box.warning {
            background-color: #fff3e0;
            border-left-color: #ff9800;
        }
        
        .info-box.danger {
            background-color: #ffebee;
            border-left-color: #f44336;
        }
        
        .code-block {
            background-color: #1e1e1e;
            color: #00ff00;
            padding: 15px;
            border-radius: 6px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.8;
            border: 1px solid #333;
            white-space: pre-wrap;
            word-wrap: break-word;
            display: block;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 13px;
        }
        
        table th {
            background-color: #f5f5f5;
            padding: 12px;
            text-align: left;
            font-weight: 600;
            border-bottom: 2px solid #ddd;
        }
        
        table td {
            padding: 12px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        table tr:hover {
            background-color: #f9f9f9;
        }
        
        ul, ol {
            margin-left: 20px;
            margin-bottom: 15px;
        }
        
        li {
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .highlight {
            background-color: #fff59d;
            padding: 2px 6px;
            border-radius: 3px;
        }
        
        .spec-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 15px 0;
            font-size: 13px;
        }
        
        .spec-item {
            padding: 15px;
            background: #f0f5ff;
            border-left: 4px solid #2196F3;
            border-radius: 4px;
        }
        
        .spec-label {
            font-weight: 600;
            color: #1a1a1a;
        }
        
        .spec-value {
            color: #666;
            margin-top: 3px;
        }
        
        .step-box {
            padding: 20px;
            margin: 15px 0;
            background: #fafafa;
            border-left: 5px solid #2196F3;
            border-radius: 6px;
        }
        
        .step-box h4 {
            margin-top: 0;
            color: #2196F3;
        }
        
        .page-break {
            page-break-after: always;
            margin: 40px 0;
        }
        
        .footer {
            text-align: right;
            font-size: 12px;
            color: #999;
            margin-top: 50px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        
        @media print {
            body {
                background: white;
                padding: 0;
            }
            
            .container {
                box-shadow: none;
                padding: 40px;
                max-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ’» GitHub Actions è‡ªæ‰˜ç®¡ Runner å®Œæ•´éƒ¨ç½²æŒ‡å—</h1>
        <div class="subtitle">Rocky Linux 9.7 + æ— äººå€¼å®ˆéƒ¨ç½² | åŸºäºå®é™…éƒ¨ç½²è¿‡ç¨‹ | Runner v2.331.0</div>

        <h2>ğŸ’¡ ç¡¬ä»¶é…ç½®ä¸æ€§èƒ½åˆ†æ</h2>
        
        <h3>æˆ‘çš„ç”µè„‘è§„æ ¼</h3>
        <div class="spec-grid">
            <div class="spec-item">
                <div class="spec-label">CPU</div>
                <div class="spec-value">Intel Core i7-5500U @ 2.4GHz (2æ ¸4çº¿ç¨‹)</div>
            </div>
            <div class="spec-item">
                <div class="spec-label">å†…å­˜</div>
                <div class="spec-value">8GB DDR3L</div>
            </div>
            <div class="spec-item">
                <div class="spec-label">ç¡¬ç›˜</div>
                <div class="spec-value">256GB SSD (æ ¹åˆ†åŒº 40GB)</div>
            </div>
            <div class="spec-item">
                <div class="spec-label">æ“ä½œç³»ç»Ÿ</div>
                <div class="spec-value">Rocky Linux 9.7 (è“çŸ¿çŸ³)</div>
            </div>
        </div>

        <h3>è¿™ä¸ªé…ç½®èƒ½èƒœä»»ä»€ä¹ˆ</h3>
        <ul>
            <li>âœ… ç¨³å®šæ”¯æŒ rclone é¡¹ç›®çš„ 8-10 ä¸ªå¹¶å‘ CI/CD ä»»åŠ¡</li>
            <li>âœ… æ—¥å¸¸ç¼–è¯‘æ²¡æœ‰å‹åŠ›ï¼Œå¤šçº¿ç¨‹æ„å»ºéœ€è¦ä¸€ç‚¹è€å¿ƒ</li>
            <li>âœ… é€‚åˆä¸­å°å‹å¼€æºé¡¹ç›®çš„è‡ªåŠ¨åŒ–æ„å»º</li>
        </ul>

        <h3>è¿è¡Œæ—¶æ€§èƒ½è¡¨ç°</h3>
        <table>
            <tr>
                <th>çŠ¶æ€</th>
                <th>CPU å ç”¨</th>
                <th>å†…å­˜å ç”¨</th>
            </tr>
            <tr>
                <td>ğŸŸ¢ ç©ºé—²</td>
                <td>2-5%</td>
                <td>150MB</td>
            </tr>
            <tr>
                <td>ğŸŸ¡ ç¼–è¯‘ä¸­</td>
                <td>60-80%</td>
                <td>1.2GB</td>
            </tr>
            <tr style="background-color: #fff3cd;">
                <td>ğŸŸ  3ä¸ªå¹¶å‘</td>
                <td>90%+</td>
                <td>2.5GB</td>
            </tr>
        </table>

        <h3>ç¡¬ç›˜ç©ºé—´åˆ†å¸ƒ</h3>
        <div class="code-block">256GB æ€»å®¹é‡
â”œâ”€ Rocky Linux ç³»ç»Ÿæ–‡ä»¶: 7GB
â”œâ”€ GitHub Actions Runner: 800MB
â”œâ”€ å·¥ä½œç›®å½• (_work): 30-40GB å¯ç”¨
â””â”€ å•æ¬¡æ„å»ºäº§ç‰©: 500MB-2GB (ä¸´æ—¶)</div>

        <h2>ğŸ¯ å‰ç½®è¦æ±‚ä¸å‡†å¤‡æ¸…å•</h2>
        
        <h3>å¿…éœ€ç‰©å“ä¸æƒé™</h3>
        <ul>
            <li>â˜‘ï¸ ä¸€å° USB é©±åŠ¨å™¨ï¼ˆ8GB+ï¼‰</li>
            <li>â˜‘ï¸ balenaEtcherï¼ˆç”¨äºçƒ§å†™ç³»ç»Ÿé•œåƒï¼‰</li>
            <li>â˜‘ï¸ Rocky Linux 9.7 ISO é•œåƒï¼ˆçº¦ 12GBï¼‰</li>
            <li>â˜‘ï¸ ç½‘çº¿è¿æ¥ï¼ˆæˆ–å®‰è£…å®Œåé…ç½® Wi-Fiï¼‰</li>
            <li>â˜‘ï¸ GitHub ä»“åº“çš„<span class="highlight">ç®¡ç†å‘˜æƒé™</span></li>
            <li>â˜‘ï¸ é—²ç½®ç”µè„‘ä¸€å°ï¼ˆä¸éœ€è¦24å°æ—¶è¿è¡Œï¼‰</li>
        </ul>

        <h2>ğŸš€ ä¸€é”®æ— äººå€¼å®ˆéƒ¨ç½²</h2>

        <div class="info-box success">
            <h3 style="margin-top: 0; color: #2e7d32;">æœ€å¿«æ–¹å¼ï¼š3 åˆ†é’Ÿæå®š</h3>

            <h4>ç¬¬ 1 æ­¥ï¼šè·å– GitHub Runner Token</h4>
            <p>è¿›å…¥ä½ çš„ GitHub ä»“åº“ï¼Œä¾æ¬¡ç‚¹å‡»ï¼š</p>
            <div class="code-block">Settings â†’ Actions & general â†’ Runners â†’ New self-hosted runner</div>

            <p>é€‰æ‹©æ“ä½œç³»ç»Ÿï¼š<span class="highlight">Linux</span> å’Œ æ¶æ„ï¼š<span class="highlight">x64</span></p>

            <p>é¡µé¢ä¼šæ˜¾ç¤ºï¼š</p>
            <div class="code-block">ğŸ”— ä»“åº“åœ°å€: https://github.com/YourUsername/YourRepo
ğŸ”‘ Token: ghp_xxxxxxxxxxxx (åªæ˜¾ç¤ºä¸€æ¬¡ï¼Œå¦¥å–„ä¿ç®¡ï¼ğŸ˜±)</div>

            <h4>ç¬¬ 2 æ­¥ï¼šåœ¨æ–°æœºå™¨ä¸Šæ‰§è¡Œä¸€é”®éƒ¨ç½²è„šæœ¬</h4>

            <p><strong>å‰ææ¡ä»¶ï¼š</strong></p>
            <ul style="margin-left: 20px;">
                <li>Rocky Linux 9.7 å·²å®‰è£…å®Œæˆ</li>
                <li>å·²ç”¨ root è´¦æˆ·ç™»å½•æˆ–æœ‰ sudo æƒé™</li>
                <li>ç½‘ç»œè¿æ¥æ­£å¸¸ï¼ˆèƒ½è®¿é—® GitHubï¼‰</li>
            </ul>

            <div class="code-block">bash -c "$(curl -fsSL https://raw.githubusercontent.com/YourUsername/YourRepo/main/deploy-runner.sh)" \
  --github-url "https://github.com/YourUsername/YourRepo" \
  --token "ghp_xxxxxxxxxxxx" \
  --runner-name "my-runner-1"</div>

            <p>ğŸ’¡ <strong>æç¤ºï¼š</strong>è„šæœ¬ä¼šè‡ªåŠ¨å¤„ç†æ‰€æœ‰é…ç½®ï¼ŒåŒ…æ‹¬ç¦ç”¨ SELinuxã€åˆ›å»º runner ç”¨æˆ·ã€å®‰è£…ä¾èµ–ã€å¯åŠ¨æœåŠ¡</p>

            <h4>ç¬¬ 3 æ­¥ï¼šéªŒè¯éƒ¨ç½²æˆåŠŸ</h4>

            <p>è„šæœ¬æ‰§è¡Œå®Œæ¯•åï¼Œåœ¨ GitHub ç½‘é¡µä¸Šåˆ·æ–° Runners é¡µé¢ï¼Œåº”è¯¥çœ‹åˆ°ï¼š</p>
            <ul style="margin-left: 20px;">
                <li>âœ… Runner åç§°å‡ºç°åœ¨åˆ—è¡¨ä¸­</li>
                <li>âœ… çŠ¶æ€æ˜¾ç¤º <span style="background: #c8e6c9; padding: 2px 8px; border-radius: 3px;">Idle</span>ï¼ˆç©ºé—²ï¼‰</li>
                <li>âœ… æ— é”™è¯¯æ—¥å¿—</li>
            </ul>

            <p><strong>ç°åœ¨ GitHub Actions ä¼šè‡ªåŠ¨åˆ†é…ä»»åŠ¡åˆ°è¯¥ Runner äº†ï¼ğŸ‰</strong></p>
        </div>

        <div class="page-break"></div>

        <h2>ğŸ“‹ è¯¦ç»†æ‰‹åŠ¨éƒ¨ç½²æ­¥éª¤</h2>

        <div class="info-box warning">
            <p>âš ï¸ å¦‚æœä¸€é”®è„šæœ¬ä¸å·¥ä½œï¼Œæˆ–ä½ æƒ³ç†è§£æ¯ä¸ªæ­¥éª¤ï¼Œè¯·æŒ‰ä»¥ä¸‹æ‰‹åŠ¨æµç¨‹æ“ä½œã€‚</p>
        </div>

        <h3>ç¬¬ 1 é˜¶æ®µï¼šå®‰è£…æ“ä½œç³»ç»Ÿ</h3>

        <div class="step-box">
            <h4>å‡†å¤‡å·¥ä½œ</h4>
            <ol style="margin-left: 20px;">
                <li>ç”¨ balenaEtcher å°† Rocky-9.7-x86_64-dvd.iso çƒ§å†™åˆ° USB é©±åŠ¨å™¨</li>
                <li>æ’å…¥ USB å¹¶å¼€æœºï¼Œè¿›å…¥ BIOSï¼ˆé€šå¸¸æ˜¯æŒ‰ F2ã€F12 æˆ– Delï¼‰</li>
                <li>è®¾ç½®å¯åŠ¨é¡ºåºï¼š<span class="highlight">UEFI USB â†’ ç¡¬ç›˜</span></li>
                <li>ä¿å­˜å¹¶é‡å¯ï¼Œä» USB å¯åŠ¨</li>
            </ol>

            <h4 style="margin-top: 25px;">å®‰è£…æ—¶çš„å…³é”®é€‰æ‹©</h4>
            <table style="font-size: 12px;">
                <tr>
                    <th style="width: 25%;">é€‰é¡¹</th>
                    <th style="width: 25%;">å»ºè®®é…ç½®</th>
                    <th style="width: 50%;">è¯´æ˜</th>
                </tr>
                <tr>
                    <td>åˆ†åŒºæ–¹å¼</td>
                    <td>LVM è‡ªåŠ¨é…ç½®</td>
                    <td>é€‰æ‹©è‡ªåŠ¨åˆ†åŒºï¼Œä½†è¦æŒ‡å®šæ ¹ï¼ˆ/ï¼‰åˆ†åŒºå¤§å°ä¸º 40GB</td>
                </tr>
                <tr style="background: #f0f4ff;">
                    <td>æ–‡ä»¶ç³»ç»Ÿ</td>
                    <td>ext4ï¼ˆæ¨èï¼‰</td>
                    <td>XFS ä¹Ÿå¯ä»¥ï¼Œä½† ext4 å…¼å®¹æ€§æ›´å¥½ï¼Œæ€§èƒ½ç¨³å®š</td>
                </tr>
                <tr style="background-color: #fff9c4;">
                    <td><strong>SELinux</strong></td>
                    <td><strong>ç¦ç”¨ âš ï¸</strong></td>
                    <td>å®‰è£…æ—¶é€‰æ‹©ç¦ç”¨ï¼ˆDisabledï¼‰ã€‚å¦åˆ™ Runner æœåŠ¡ä¼šå› æƒé™é—®é¢˜æ— æ³•å¯åŠ¨</td>
                </tr>
                <tr>
                    <td>ç½‘ç»œ</td>
                    <td>å¯é€‰</td>
                    <td>ä¸æ’ç½‘çº¿ä¹Ÿè¡Œï¼Œè£…å®Œåå†é…ç½®ã€‚å»ºè®®å®‰è£… DHCP è‡ªåŠ¨è·å–</td>
                </tr>
                <tr>
                    <td>Root ç™»å½•</td>
                    <td>å…è®¸</td>
                    <td>è„šæœ¬éœ€è¦ root æƒé™åˆå§‹åŒ–ã€‚å®‰è£…åå¯åœ¨ SSH é…ç½®ä¸­é™åˆ¶</td>
                </tr>
            </table>

            <h4 style="margin-top: 25px;">ç¡¬ç›˜ç©ºé—´åˆ†é…è§„åˆ’</h4>
            <p>256GB ç¡¬ç›˜åŸºäºå®é™…éƒ¨ç½²ç»éªŒçš„åˆ†åŒºæ–¹æ¡ˆå¦‚ä¸‹ï¼š</p>
            <table style="font-size: 12px; margin: 15px 0;">
                <tr>
                    <th style="width: 20%;">åˆ†åŒº</th>
                    <th style="width: 15%;">æŒ‚è½½ç‚¹</th>
                    <th style="width: 15%;">å®¹é‡</th>
                    <th style="width: 20%;">æ–‡ä»¶ç³»ç»Ÿ</th>
                    <th style="width: 30%;">ç”¨é€”è¯´æ˜</th>
                </tr>
                <tr>
                    <td>sda1</td>
                    <td>/boot/efi</td>
                    <td>500 MB</td>
                    <td>EFI System</td>
                    <td>UEFI å¯åŠ¨åˆ†åŒºï¼Œ<span style="color: #d32f2f;"><strong>å¿…é¡»æœ‰</strong></span>ï¼Œå¦åˆ™æ— æ³• UEFI å¯åŠ¨</td>
                </tr>
                <tr style="background: #f5f5f5;">
                    <td>sda2</td>
                    <td>/</td>
                    <td>40 GB</td>
                    <td>ext4</td>
                    <td>ç³»ç»Ÿå’Œ Runner è½¯ä»¶ã€‚å®‰è£…å®Œåå¯ç”¨ â‰ˆ 30GB+</td>
                </tr>
                <tr>
                    <td>sda3</td>
                    <td>swap</td>
                    <td>8 GB</td>
                    <td>swap</td>
                    <td>è™šæ‹Ÿå†…å­˜ï¼Œé˜²æ­¢ç¼–è¯‘æ—¶å†…å­˜æº¢å‡ºï¼ˆ3ä¸ªå¹¶å‘ä»»åŠ¡æ—¶éœ€è¦ï¼‰</td>
                </tr>
                <tr style="background: #f5f5f5;">
                    <td>sda4</td>
                    <td>/work</td>
                    <td>å‰©ä½™ ~208 GB</td>
                    <td>ext4</td>
                    <td>æ„å»ºå·¥ä½œç›®å½•ï¼ŒOpenWrt/rclone ç¼–è¯‘äº§ç‰©å…¨éƒ¨åœ¨æ­¤ã€‚é‡ç‚¹ä¿æŠ¤åŒº</td>
                </tr>
            </table>

            <h4 style="margin-top: 20px;">åˆ†åŒºæ–¹å¼é€‰æ‹©</h4>
            <table style="font-size: 12px;">
                <tr>
                    <th style="width: 30%;">é€‰é¡¹</th>
                    <th style="width: 25%;">å»ºè®®</th>
                    <th style="width: 45%;">è¯´æ˜</th>
                </tr>
                <tr style="background-color: #fff9c4;">
                    <td><strong>æ ‡å‡†åˆ†åŒº</strong></td>
                    <td><strong>âœ… é€‰è¿™ä¸ª</strong></td>
                    <td>å•ç›˜ CI è£¸æœºçš„å·¥ä¸šçº§ç¨³å¦¥é€‰æ‹©ã€‚æ— é¢å¤–æŠ½è±¡å±‚ï¼Œæ•…éšœæ’æŸ¥æ¸…æ™°</td>
                </tr>
                <tr>
                    <td>LVM ç®€å•é…ç½®</td>
                    <td>âŒ ä¸è¦é€‰</td>
                    <td>ä½ çš„åœºæ™¯ï¼ˆå•ç›˜ã€åˆ†åŒºå·²è§„åˆ’å¥½ï¼‰ä¸éœ€è¦ LVM çš„åŠ¨æ€æ‰©å®¹ã€‚å¤šä¸€å±‚æ˜ å°„ä¼šå¢åŠ æ’é”™å¤æ‚åº¦</td>
                </tr>
                <tr>
                    <td>LVM ç²¾ç»†é…ç½®</td>
                    <td>âŒ ä¸è¦é€‰</td>
                    <td>ç†ç”±åŒä¸Šï¼Œå¯¹äºåˆæ¬¡éƒ¨ç½²æˆæœ¬è¿‡é«˜</td>
                </tr>
                <tr style="background: #f0f4ff;">
                    <td>æ–‡ä»¶ç³»ç»Ÿ</td>
                    <td><strong>ext4</strong></td>
                    <td>å…¼å®¹æ€§å¥½ï¼Œæ€§èƒ½ç¨³å®šã€‚OpenWrt å’Œå¤§è§„æ¨¡æ„å»ºåœºæ™¯é¦–é€‰ã€‚ä¸é€‰ XFS</td>
                </tr>
            </table>

            <h4 style="margin-top: 20px;">æ ¹åˆ†åŒº 40GB å¤Ÿå—ï¼Ÿ</h4>
            <p><strong>ç­”ï¼šå®Œå…¨å¤Ÿï¼Œè€Œä¸”ç»°ç»°æœ‰ä½™ã€‚</strong></p>
            <div class="info-box success">
                <p style="margin: 0;"><strong>å®æµ‹æ•°æ®ï¼š</strong></p>
                <ul style="margin: 15px 0 0 0;">
                    <li>Rocky Linux 9 æœ€å°åŒ–å®‰è£…åˆšå®Œæˆï¼š<strong>â‰ˆ 1.5â€“2.0 GB</strong></li>
                    <li>dnf update + å¸¸ç”¨æ„å»ºä¾èµ–åï¼š<strong>â‰ˆ 4â€“6 GB</strong></li>
                    <li>å®‰è£…å¹¶è¿è¡Œ Runnerï¼š<strong>å†å¢åŠ  < 500 MB</strong></li>
                    <li><strong>æœ€ç»ˆæ ¹åˆ†åŒºé•¿æœŸå¯ç”¨ï¼šâ‰ˆ 30 GB ä»¥ä¸Šï¼ˆå¾ˆç¨³å®šï¼‰</strong></li>
                </ul>
                <p style="margin: 10px 0 0 0;"><strong>ä¸ºä»€ä¹ˆæ ¹åˆ†åŒºå‡ ä¹ä¸æ¶¨ï¼Ÿ</strong>å¤§å¤´ï¼ˆOpenWrtã€rclone æ„å»ºã€toolchainï¼‰å…¨éƒ¨åœ¨ /work åˆ†åŒºï¼Œä¸ä¼šè§¦åŠæ ¹åˆ†åŒº</p>
            </div>

            <div class="info-box danger" style="margin-top: 20px;">
                <p style="margin: 0;">âŒ <strong>å¸¸è§å‘ï¼š</strong>å¦‚æœé€‰ä¸­äº† SELinux å¹¶ä¸”æ²¡æœ‰ç¦ç”¨ï¼ŒRunner ä¼šä¸€ç›´å¯åŠ¨å¤±è´¥ï¼Œé”™è¯¯æç¤º "Permission denied"ã€‚å»ºè®®åœ¨å®‰è£…æ—¶ç›´æ¥ç¦ç”¨ï¼Œä¸è¦å¯„æœ›åæœŸæ‰‹åŠ¨å…³é—­</p>
            </div>
        </div>

        <h3>ç¬¬ 2 é˜¶æ®µï¼šé…ç½®ç½‘ç»œ</h3>

        <p>å¦‚æœå®‰è£…æ—¶æ²¡æœ‰æ’ç½‘çº¿ï¼Œç°åœ¨éœ€è¦æ‰‹åŠ¨å¯ç”¨ç½‘ç»œè¿æ¥ã€‚æ— è®ºä½•æ—¶ï¼Œéƒ½è¦ç¡®ä¿ç½‘ç»œè¿æ¥æ­£å¸¸ï¼Œå› ä¸º Runner éœ€è¦ä¸ GitHub æœåŠ¡å™¨é€šä¿¡ã€‚</p>

        <div class="code-block"># æŸ¥çœ‹ç½‘å¡çŠ¶æ€ï¼ˆæ˜¾ç¤ºæ‰€æœ‰ç½‘å¡ï¼‰
nmcli device show

# æŸ¥çœ‹ç½‘ç»œè¿æ¥åˆ—è¡¨
nmcli connection show

# å¦‚æœç½‘å¡æ²¡æœ‰ IP åœ°å€ï¼Œæ‰‹åŠ¨æ¿€æ´»ç½‘å¡
nmcli connection add con-name eth0 ifname eth0 type ethernet
nmcli connection modify eth0 ipv4.method auto
nmcli connection up eth0

# éªŒè¯ç½‘ç»œè¿æ¥ï¼ˆè‡³å°‘è¦èƒ½ ping é€š GitHub å’Œ 8.8.8.8ï¼‰
ping 8.8.8.8
ping github.com

# æ£€æŸ¥ DNS æ˜¯å¦é…ç½®æ­£ç¡®
cat /etc/resolv.conf  # åº”è¯¥æœ‰ nameserver è¡Œ</div>

        <div class="info-box warning">
            <p style="margin: 0;"><strong>âš ï¸ å‘ç‚¹ï¼šç½‘å¡é…ç½®æ²¡æœ‰å¼€æœºå¯åŠ¨</strong><br/><br/>ç—‡çŠ¶ï¼šç³»ç»Ÿé‡å¯åç½‘ç»œè¿æ¥åˆæ–­äº†<br/><br/>è§£å†³ï¼šè®¾ç½®ç½‘å¡ä¸ºè‡ªåŠ¨å¯åŠ¨</p>
        </div>

        <div class="code-block"># è®©ç½‘ç»œè¿æ¥å¼€æœºè‡ªå¯
sudo nmcli connection modify eth0 connection.autoconnect yes
sudo nmcli connection up eth0

# é‡å¯éªŒè¯
sudo reboot
ping 8.8.8.8</div>

        <h3>ç¬¬ 3 é˜¶æ®µï¼šç¦ç”¨ SELinuxï¼ˆå¦‚æœå®‰è£…æ—¶æ²¡ç¦ç”¨ï¼‰</h3>

        <p>SELinux æ˜¯å¼ºåˆ¶è®¿é—®æ§åˆ¶ï¼ˆMACï¼‰å®‰å…¨ç³»ç»Ÿï¼Œä¼šå¯¹ systemd å¯åŠ¨ Runner çš„æƒé™é€ æˆé™åˆ¶ã€‚å³ä½¿ä½ åœ¨å®‰è£…æ—¶é€‰äº†ç¦ç”¨ï¼Œrocky ç³»ç»Ÿæœ‰æ—¶è¿˜æ˜¯ä¼šåœ¨å¯åŠ¨åé‡ç½®ï¼Œæ‰€ä»¥æœ€å¥½å†éªŒè¯ä¸€éã€‚</p>

        <div class="code-block"># æŸ¥çœ‹å½“å‰ SELinux çŠ¶æ€
getenforce  # æ˜¾ç¤º Disabled è¡¨ç¤ºå·²ç¦ç”¨ï¼ŒEnforcing è¡¨ç¤ºæ­£åœ¨æ‰§è¡Œ

# ç«‹å³ç¦ç”¨ï¼ˆæ— éœ€é‡å¯ï¼‰
sudo setenforce 0

# æ°¸ä¹…ç¦ç”¨ï¼ˆé‡å¯ç”Ÿæ•ˆï¼‰  
sudo sed -i 's/^SELINUX=.*/SELINUX=disabled/' /etc/selinux/config

# éªŒè¯é…ç½®æ–‡ä»¶
grep ^SELINUX /etc/selinux/config  # åº”è¯¥æ˜¾ç¤º SELINUX=disabled

# é‡å¯åå†æ¬¡æ£€æŸ¥
sudo reboot
getenforce</div>

        <div class="info-box warning">
            <p style="margin: 0;"><strong>âš ï¸ å‘ç‚¹ï¼šsystemd å¯åŠ¨å¤±è´¥å› ä¸º SELinux é‡æ–°å¯ç”¨</strong><br/><br/>ç—‡çŠ¶ï¼šé‡å¯å Runner æœåŠ¡åˆæ— æ³•å¯åŠ¨ï¼Œæç¤º "Permission denied"<br/><br/>åŸå› ï¼šæŸäº›ç³»ç»Ÿé…ç½®ä¼šè¦†ç›– /etc/selinux/configï¼Œæˆ–è€… SELinux æœ¬èº«æœ‰ç¼“å­˜<br/><br/>è§£å†³ï¼šåŒæ—¶æ£€æŸ¥å¹¶ä¿®æ”¹ /etc/sysconfig/selinux ï¼ˆå¦‚æœå­˜åœ¨çš„è¯ï¼‰</p>
        </div>

        <h3>ç¬¬ 4 é˜¶æ®µï¼šåˆ›å»º Runner ç”¨æˆ·</h3>

        <div class="info-box danger">
            <p style="margin: 0;">âš ï¸ <strong>é‡è¦ï¼š</strong>Runner åº”è¯¥ä»¥ç‹¬ç«‹ç”¨æˆ·èº«ä»½è¿è¡Œï¼Œä¸è¦ç”¨ rootï¼</p>
        </div>

        <div class="code-block"># åˆ›å»º runner ç”¨æˆ·
sudo useradd -m -s /bin/bash runner

# æ·»åŠ  sudo æƒé™ï¼ˆè¿™æ ·å¯ä»¥è¿è¡Œéœ€è¦ root çš„å‘½ä»¤ï¼‰
sudo usermod -aG wheel runner

# éªŒè¯
sudo -u runner sudo whoami  # åº”è¯¥è¾“å‡º root</div>

        <h3>ç¬¬ 5 é˜¶æ®µï¼šä¸‹è½½ä¸å®‰è£… Runner</h3>

        <p><strong>ä¸ºä»€ä¹ˆä½¿ç”¨ /opt è€Œä¸æ˜¯ /homeï¼Ÿ</strong> /opt æ˜¯æ ‡å‡†çš„ç¬¬ä¸‰æ–¹åº”ç”¨å®‰è£…ç›®å½•ï¼Œä¸ç”¨æˆ·æ•°æ®åˆ†ç¦»ï¼Œä¾¿äºç£ç›˜ç®¡ç†ã€å¤‡ä»½å’Œå‡çº§ã€‚/home å¯èƒ½å› ä¸ºç”¨æˆ·ä¸»ç›®å½•å¤‡ä»½ç­–ç•¥è€Œè¢«è‡ªåŠ¨æ¸…ç†ã€‚</p>

        <div class="code-block"># ä»¥ root èº«ä»½æ‰§è¡Œï¼ˆæ”¹ç”¨ opt è·¯å¾„ï¼‰
sudo mkdir -p /opt/actions-runner
cd /opt/actions-runner

# ä¸‹è½½ Runnerï¼ˆv2.331.0ï¼‰
sudo wget https://github.com/actions/runner/releases/download/v2.331.0/actions-runner-linux-x64-2.331.0.tar.gz

# è§£å‹
sudo tar xzf actions-runner-linux-x64-2.331.0.tar.gz

# æ”¹å˜æ‰€æœ‰æƒç»™ runner ç”¨æˆ·ï¼ˆè¿™æ · runner ç”¨æˆ·å¯ä»¥ç›´æ¥è¯»å†™ï¼‰
sudo chown -R runner:runner /opt/actions-runner

# åˆ‡æ¢åˆ° runner ç”¨æˆ·ï¼Œå®‰è£…ä¾èµ–ï¼ˆè¿™ä¸€æ­¥éœ€è¦ rootï¼Œä½†åœ¨ runner ç”¨æˆ·çš„ sudo æƒé™ä¸‹æ‰§è¡Œï¼‰
sudo bash bin/installdependencies.sh</div>

        <div class="info-box info">
            <p style="margin: 0;">ğŸ’¡ <strong>æç¤ºï¼š</strong>é€šè¿‡ sudo chown æ”¹å˜æ‰€æœ‰æƒï¼Œrunner ç”¨æˆ·å°±å¯ä»¥ç›´æ¥æ“ä½œ /opt/actions-runner ç›®å½•ï¼Œæ— éœ€é¢‘ç¹åˆ‡æ¢ç”¨æˆ·ã€‚è¿™å‡å°‘äº†æƒé™æ··ä¹±çš„å‡ ç‡ã€‚</p>
        </div>

        <div class="info-box warning">
            <p style="margin: 0;"><strong>âš ï¸ å‘ç‚¹ï¼štar è§£å‹å¤±è´¥ (gzip: stdin: not in gzip format)</strong><br/><br/>åŸå› ï¼šæ–‡ä»¶ä¸‹è½½ä¸å®Œæ•´æˆ–è¢«ç ´åã€‚ç½‘ç»œä¸­æ–­å¯¼è‡´ .tar.gz æ–‡ä»¶å°¾éƒ¨ç¼ºæŸæ˜¯å¸¸è§åŸå› ã€‚<br/><br/>è§£å†³ï¼šåˆ é™¤æ–‡ä»¶åé‡æ–°ä¸‹è½½<br/><span style="font-family: monospace;">sudo rm actions-runner-linux-x64*.tar.gz</span></p>
        </div>

        <h3>ç¬¬ 6 é˜¶æ®µï¼šé…ç½® Runner</h3>

        <div class="code-block"># åˆ‡æ¢åˆ° runner ç”¨æˆ·
sudo -u runner -s

# è¿›å…¥ Runner ç›®å½•
cd /opt/actions-runner

# è¿è¡Œé…ç½®è„šæœ¬
./config.sh</div>

        <p><strong>äº¤äº’å¼é…ç½®è¿‡ç¨‹è¯¦è§£ï¼š</strong></p>

        <table style="font-size: 12px; margin: 15px 0;">
            <tr>
                <th style="width: 35%;">æç¤º</th>
                <th style="width: 30%;">ç¤ºä¾‹è¾“å…¥</th>
                <th style="width: 35%;">è¯´æ˜</th>
            </tr>
            <tr>
                <td>GitHub URL</td>
                <td><code>https://github.com/<br/>YourUsername/YourRepo</code></td>
                <td>å¿…é¡»ç²¾ç¡®ï¼ŒåŒ…æ‹¬ /owner/repo éƒ¨åˆ†ã€‚ä¸è¦å¤šä½™æˆ–å°‘ä½™å­—ç¬¦</td>
            </tr>
            <tr style="background: #f5f5f5;">
                <td>Token</td>
                <td><code>ghp_xxxxxxxxxxxx</code></td>
                <td>ä» GitHub é¡µé¢å¤åˆ¶ã€‚Token åªæ˜¾ç¤ºä¸€æ¬¡ï¼Œè¿‡æœŸéœ€é‡æ–°ç”Ÿæˆã€‚<span style="color: #d32f2f;"><br/>âš ï¸ ç²˜è´´åä¸ä¼šæ˜¾ç¤ºï¼Œç›´æ¥æŒ‰ Enter</span></td>
            </tr>
            <tr>
                <td>Runner name</td>
                <td><code>my-runner-1</code></td>
                <td>è‡ªå®šä¹‰åç§°ï¼ŒGitHub Actions ä¸­ä¼šä»¥æ­¤åç§°æ˜¾ç¤ºã€‚å»ºè®®ç”¨"æœºå™¨å-åºå·"æ ¼å¼ï¼Œæ–¹ä¾¿å¤šæœºå™¨éƒ¨ç½²</td>
            </tr>
            <tr style="background: #f5f5f5;">
                <td>Runner group</td>
                <td><code>Default</code></td>
                <td>ä¿æŒé»˜è®¤å³å¯ã€‚Group æ˜¯ç”¨æ¥ç»„ç»‡å¤šä¸ª Runner çš„ï¼Œä¼ä¸šçº§åŠŸèƒ½ï¼Œä¸ªäººç”¨ä¸åˆ°</td>
            </tr>
            <tr>
                <td>Work folder</td>
                <td><code>_work</code></td>
                <td>æŒ‰ Enter ä½¿ç”¨é»˜è®¤ã€‚è¿™ä¸ªç›®å½•ä¼šæ”¾ç½®æ¯æ¬¡ CI/CD æµç¨‹çš„ä¸´æ—¶æ–‡ä»¶å’Œæ„å»ºäº§ç‰©ï¼Œå®Œæ•´è·¯å¾„ä¸º /opt/actions-runner/_work</td>
            </tr>
            <tr style="background: #f5f5f5;">
                <td>Labels</td>
                <td><code>Custom,label,here</code><br/>æˆ–ç›´æ¥ Enter è·³è¿‡</td>
                <td><span style="color: #d32f2f;">âš ï¸ å¯é€‰é¡¹ï¼Œä½†å¾ˆé‡è¦</span>ã€‚Labels ç”¨æ¥æ ‡è®° Runner çš„ç‰¹æ€§ï¼ˆå¦‚ gpu, docker ç­‰ï¼‰ï¼ŒGitHub Actions å¯ä»¥æŒ‰ label é€‰æ‹©è¿è¡Œçš„ Runnerã€‚è®¾ç½®åä¸éœ€è¦ä¿®æ”¹ .ymlï¼Œåªéœ€é‡å¯ Runner å³ç”Ÿæ•ˆã€‚<br/><br/>å¦‚æœä¸è®¾ç½®ï¼Œ.yml ä¸­å¯ç”¨ <code>runs-on: self-hosted</code> æ¥è¿è¡Œæ‰€æœ‰è‡ªæ‰˜ç®¡ Runner</td>
            </tr>
        </table>

        <h4 style="margin-top: 20px;">å…³äº Labels çš„è¿›é˜¶ç”¨æ³•</h4>
        <p>å¦‚æœä½ çš„ rclone ä»“åº“ CI/CD é…ç½®äº†ç‰¹å®šçš„ labelï¼Œæ¯”å¦‚ï¼š</p>
        <div class="code-block">runs-on: [self-hosted, linux-x64]</div>
        <p>é‚£ä¹ˆåœ¨é…ç½®æ—¶å°±è¦åŠ ä¸Šå¯¹åº”çš„ labelï¼š</p>
        <div class="code-block">? Labels (ex. label-1,label-2) [press Enter to skip]: self-hosted,linux-x64</div>

        <div class="info-box danger" style="margin-top: 20px;">
            <p style="margin: 0;"><strong>âš ï¸ å‘ç‚¹ï¼šRunner å·²å­˜åœ¨åŒåç§°çš„é”™è¯¯</strong><br/><br/>ç—‡çŠ¶ï¼šé…ç½®æ—¶æç¤º <code>A runner exists with the same name</code><br/><br/>åŸå› ï¼šä¹‹å‰éƒ¨ç½²è¿‡ç›¸åŒåç§°çš„ Runnerï¼Œé…ç½®ä¿¡æ¯è¿˜åœ¨ GitHub çš„æ•°æ®åº“ä¸­<br/><br/>è§£å†³ï¼šåˆ é™¤æ—§ Runner åé‡æ–°é…ç½®</p>
        </div>

        <h3>ç¬¬ 7 é˜¶æ®µï¼šå¯åŠ¨ Runner æœåŠ¡</h3>

        <div class="info-box danger">
            <p style="margin: 0;">âš ï¸ <strong>é‡è¦ï¼š</strong>å¦‚æœ SELinux è¿˜æ²¡ç¦ç”¨ï¼Œä»¥ä¸‹å‘½ä»¤ä¼šå¤±è´¥ï¼å¿…é¡»å…ˆæ‰§è¡Œç¬¬ 3 é˜¶æ®µå½»åº•ç¦ç”¨ SELinux å¹¶é‡å¯éªŒè¯ã€‚</p>
        </div>

        <div class="code-block"># ç¡®ä¿å›åˆ° root ç”¨æˆ·
exit  # å¦‚æœè¿˜åœ¨ runner ç”¨æˆ·çš„ shell ä¸­

# è¿›å…¥ Runner ç›®å½•
cd /opt/actions-runner

# ä»¥ runner ç”¨æˆ·èº«ä»½å®‰è£…ä¸ºç³»ç»ŸæœåŠ¡
sudo ./svc.sh install

# å¯åŠ¨æœåŠ¡
sudo ./svc.sh start

# æ£€æŸ¥çŠ¶æ€ï¼ˆåº”è¯¥æ˜¾ç¤º active (running)ï¼‰
sudo systemctl status actions.runner.*

# æŸ¥çœ‹æœåŠ¡è¾“å‡ºçš„å‰å‡ è¡Œæ—¥å¿—
sudo journalctl -u actions.runner.* -n 20 --no-pager</div>

        <h4 style="margin-top: 20px;">éªŒè¯ Runner æ˜¯å¦æˆåŠŸå¯åŠ¨</h4>
        <p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ£€æŸ¥å…³é”®æŒ‡æ ‡ï¼š</p>
        <div class="code-block"># 1. æ£€æŸ¥æœåŠ¡çŠ¶æ€ï¼ˆåº”æ˜¾ç¤º Active: active (running)ï¼‰
sudo systemctl status actions.runner.*

# 2. æ£€æŸ¥ Node.js è¿›ç¨‹æ˜¯å¦åœ¨è¿è¡Œ
ps aux | grep node | grep -v grep

# 3. æ£€æŸ¥åˆ° GitHub çš„è¿æ¥
sudo journalctl -u actions.runner.* | grep -i "connected\|listening"</div>

        <div class="page-break"></div>

        <h2>âš ï¸ å®é™…éƒ¨ç½²ä¸­é‡åˆ°çš„å¸¸è§é—®é¢˜</h2>

        <div class="info-box warning">
            <h3 style="margin-top: 0;">âŒ é—®é¢˜ 6ï¼šRunner å·²è¿æ¥åˆ° GitHubï¼Œä½†ä»»åŠ¡æ— æ³•åˆ†é…</h3>
            <p><strong>ç—‡çŠ¶</strong></p>
            <p>GitHub ç½‘é¡µä¸Šæ˜¾ç¤º Runner "Idle"ï¼Œä½†æäº¤ Push æˆ– PR åï¼Œä»»åŠ¡æ²¡æœ‰è¢«åˆ†é…åˆ°è¿™ä¸ª Runner</p>

            <p style="margin-top: 15px;"><strong>åŸå› </strong></p>
            <p>é€šå¸¸æ˜¯ .yml å·¥ä½œæµé…ç½®ä¸­çš„ <code>runs-on</code> æ ‡ç­¾ä¸ Runner çš„æ ‡ç­¾ä¸åŒ¹é…ï¼Œæˆ–è€… yml æ–‡ä»¶ä¸­æŒ‡å®šäº†ç‰¹å®šçš„ runner group</p>

            <p style="margin-top: 15px;"><strong>æ’æŸ¥æ–¹æ³•</strong></p>
            <div class="code-block"># 1. æ£€æŸ¥ Runner çš„æ ‡ç­¾
cd /opt/actions-runner
grep labels .runner

# 2. æŸ¥çœ‹ .yml ä¸­çš„ runs-on é…ç½®
cat .github/workflows/build.yml | grep -A 2 "runs-on:"

# 3. å¯¹æ¯”æ ‡ç­¾æ˜¯å¦ä¸€è‡´ã€‚å¦‚æœä¸ä¸€è‡´ï¼Œæœ‰ä¸¤ä¸ªæ–¹æ¡ˆï¼š
# æ–¹æ¡ˆ Aï¼šä¿®æ”¹ yml ä¸­çš„ runs-on æ ‡ç­¾
# æ–¹æ¡ˆ Bï¼šé‡æ–°é…ç½® Runnerï¼Œæ·»åŠ å¯¹åº”çš„æ ‡ç­¾</div>
        </div>

        <div class="info-box danger">
            <h3 style="margin-top: 0;">âŒ é—®é¢˜ 1ï¼šRunner æœåŠ¡å¯åŠ¨å¤±è´¥ - Permission denied</h3>
            <p><strong>ç—‡çŠ¶</strong></p>
            <p style="margin: 0; font-family: monospace; background: #fff; padding: 8px; border-radius: 4px;">systemctl status actions.runner.* æ˜¾ç¤ºï¼šFailed to locate executable ... Permission denied</p>

            <p style="margin-top: 15px;"><strong>åŸå› </strong></p>
            <p>SELinux æ­£åœ¨é˜»æ­¢ systemd æ‰§è¡Œ Runner è„šæœ¬</p>

            <p style="margin-top: 15px;"><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
            <div class="code-block">sudo setenforce 0
sudo sed -i 's/^SELINUX=.*/SELINUX=disabled/' /etc/selinux/config</div>
            <p style="margin: 5px 0 0 0;">ç„¶åé‡æ–°å¯åŠ¨æœåŠ¡</p>
        </div>

        <div class="info-box warning">
            <h3 style="margin-top: 0;">âŒ é—®é¢˜ 2ï¼šç½‘ç»œæ— æ³•è¿æ¥ - æ— æ³•ä¸‹è½½ Runner æˆ–ä¾èµ–</h3>
            <p><strong>ç—‡çŠ¶</strong></p>
            <p>ping ä¸äº†å¤–ç½‘ï¼Œwget ä¸‹è½½è¶…æ—¶</p>

            <p style="margin-top: 10px;"><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
            <div class="code-block"># æŸ¥çœ‹ç½‘å¡
nmcli device show

# æ¿€æ´»ç½‘å¡
nmcli connection up eth0
systemctl restart NetworkManager

# æ£€æŸ¥ DNS
cat /etc/resolv.conf

# æµ‹è¯•ç½‘ç»œ
ping 8.8.8.8</div>
        </div>

        <div class="info-box warning">
            <h3 style="margin-top: 0;">âŒ é—®é¢˜ 3ï¼šæ— æ³•æ‰¾åˆ°å‘½ä»¤ tarã€wget ç­‰</h3>
            <p><strong>ç—‡çŠ¶</strong></p>
            <p style="margin: 0; font-family: monospace; background: #fff; padding: 8px; border-radius: 4px;">tar: æœªæ‰¾åˆ°å‘½ä»¤<br/>wget: æœªæ‰¾åˆ°å‘½ä»¤</p>

            <p style="margin-top: 15px;"><strong>åŸå› </strong></p>
            <p>Rocky Linux æœ€å°åŒ–å®‰è£…ç¼ºå°‘åŸºç¡€å·¥å…·</p>

            <p style="margin-top: 15px;"><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
            <div class="code-block">sudo yum update -y
sudo yum install -y tar wget curl which</div>
        </div>

        <div class="info-box warning">
            <h3 style="margin-top: 0;">âŒ é—®é¢˜ 4ï¼štar è§£å‹æ˜¾ç¤º "gzip: not in gzip format"</h3>
            <p><strong>åŸå› </strong></p>
            <p>ä¸‹è½½çš„ tar.gz æ–‡ä»¶ä¸å®Œæ•´æˆ–è¢«ç ´å</p>

            <p style="margin-top: 10px;"><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
            <div class="code-block">rm actions-runner-linux-x64*.tar.gz
wget https://github.com/actions/runner/releases/download/v2.331.0/actions-runner-linux-x64-2.331.0.tar.gz
tar xzf actions-runner-linux-x64-2.331.0.tar.gz</div>
        </div>

        <div class="info-box warning">
            <h3 style="margin-top: 0;">âŒ é—®é¢˜ 5ï¼šRunner é…ç½®æ˜¾ç¤º "A runner exists with the same name"</h3>
            <p><strong>åŸå› </strong></p>
            <p>æ—§çš„ Runner é…ç½®ä»å­˜åœ¨äº GitHub çš„æ•°æ®åº“ä¸­ï¼Œæˆ–è€… .credentials æ–‡ä»¶ä»åœ¨æœ¬åœ°</p>

            <p style="margin-top: 15px;"><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
            <div class="code-block"># æ–¹æ¡ˆ 1ï¼šå…ˆå¸è½½æœåŠ¡ï¼Œå†åˆ é™¤é…ç½®ï¼ˆæ¨èï¼‰
sudo systemctl stop actions.runner.*
sudo /opt/actions-runner/svc.sh uninstall
cd /opt/actions-runner
sudo ./config.sh remove --token ghp_xxxxxxxxxxxx

# æ–¹æ¡ˆ 2ï¼šå¦‚æœä¸Šé¢ä¸ç®¡ç”¨ï¼Œæ‰‹åŠ¨åˆ é™¤æœ¬åœ°é…ç½®
sudo rm -f /opt/actions-runner/.credentials
sudo rm -f /opt/actions-runner/.runner
sudo rm -f /opt/actions-runner/.credentials_rsaparams

# ç„¶åé‡æ–°é…ç½®
cd /opt/actions-runner
sudo -u runner ./config.sh</div>

            <p style="margin-top: 10px;"><strong>åœ¨ GitHub ä¾§çš„æ¸…ç†</strong></p>
            <p>è¿›å…¥ Settings â†’ Actions â†’ Runnersï¼Œæ‰¾åˆ°æ—§çš„ Runnerï¼Œç‚¹å‡»åˆ é™¤æŒ‰é’®ã€‚ç„¶åé‡æ–°ç”Ÿæˆ Tokenã€‚</p>
        </div>

        <h2>ğŸ› ï¸ å¸¸ç”¨ç®¡ç†å‘½ä»¤é€ŸæŸ¥</h2>

        <table style="font-size: 13px;">
            <tr>
                <th style="width: 40%;">æ“ä½œ</th>
                <th style="width: 60%;">å‘½ä»¤</th>
            </tr>
            <tr>
                <td>æŸ¥çœ‹æœåŠ¡çŠ¶æ€</td>
                <td><code>sudo systemctl status actions.runner.*</code></td>
            </tr>
            <tr style="background-color: #f5f5f5;">
                <td>æŸ¥çœ‹å®æ—¶æ—¥å¿—</td>
                <td><code>sudo journalctl -u actions.runner.* -f</code></td>
            </tr>
            <tr>
                <td>æŸ¥çœ‹æœ€è¿‘ 100 è¡Œæ—¥å¿—</td>
                <td><code>sudo journalctl -u actions.runner.* -n 100</code></td>
            </tr>
            <tr style="background-color: #f5f5f5;">
                <td>å¯åŠ¨æœåŠ¡</td>
                <td><code>sudo systemctl start actions.runner.*</code></td>
            </tr>
            <tr>
                <td>åœæ­¢æœåŠ¡</td>
                <td><code>sudo systemctl stop actions.runner.*</code></td>
            </tr>
            <tr style="background-color: #f5f5f5;">
                <td>é‡å¯æœåŠ¡</td>
                <td><code>sudo systemctl restart actions.runner.*</code></td>
            </tr>
            <tr>
                <td>æŸ¥çœ‹å·¥ä½œç›®å½•å¤§å°</td>
                <td><code>du -sh /opt/actions-runner/_work</code></td>
            </tr>
            <tr style="background-color: #f5f5f5;">
                <td>æ¸…ç†å·¥ä½œç›®å½•ï¼ˆè°¨æ…ï¼ï¼‰</td>
                <td><code>sudo rm -rf /opt/actions-runner/_work/*</code></td>
            </tr>
            <tr>
                <td>æ¸…ç†æ—§æ—¥å¿—ï¼ˆè¶…è¿‡30å¤©ï¼‰</td>
                <td><code>sudo journalctl --vacuum=30d</code></td>
            </tr>
            <tr style="background-color: #f5f5f5;">
                <td>æŸ¥çœ‹ Runner è¿›ç¨‹è¯¦æƒ…</td>
                <td><code>ps aux | grep actions-runner</code></td>
            </tr>
            <tr>
                <td>åˆ é™¤ Runnerï¼ˆå®Œæ•´å¸è½½ï¼‰</td>
                <td><code>sudo /opt/actions-runner/svc.sh uninstall</code></td>
            </tr>
        </table>

        <h2>ğŸ”’ å®‰å…¨ä¸æœ€ä½³å®è·µ</h2>

        <h3>GitHub Token å®‰å…¨</h3>
        <ul>
            <li>âœ… Token ä»…åœ¨åˆå§‹é…ç½®æ—¶æ˜¾ç¤ºä¸€æ¬¡ï¼Œä¹‹åæ— æ³•æŸ¥çœ‹</li>
            <li>âœ… å¦‚æœ Token æ³„éœ²ï¼Œç«‹å³åœ¨ GitHub åˆ é™¤è¯¥ Runner å¹¶é‡æ–°ç”Ÿæˆ</li>
            <li>âœ… ä¸è¦å°† Token æäº¤åˆ°ä»£ç ä»“åº“æˆ–å†™åˆ°è„šæœ¬ä¸­</li>
            <li>âœ… Runner æœºå™¨æœ¬èº«ä¸éœ€è¦ Tokenï¼Œè®¤è¯é€šè¿‡å¯†é’¥äº¤æ¢å®Œæˆã€‚Token ä»…ç”¨äºé¦–æ¬¡æ³¨å†Œ</li>
            <li>âœ… Token è¿‡æœŸåä¼šè¢« GitHub è‡ªåŠ¨æ³¨é”€ï¼Œé‡æ–°ç”Ÿæˆéœ€è¦æœ‰ç®¡ç†å‘˜æƒé™</li>
        </ul>

        <h3>SSH å®‰å…¨åŠ å›º</h3>
        <ul>
            <li>âœ… ç¦ç”¨ root ç›´æ¥ SSH ç™»å½•ï¼šåœ¨ /etc/ssh/sshd_config ä¸­è®¾ç½® <code>PermitRootLogin no</code></li>
            <li>âœ… å…³é—­å¯†ç è®¤è¯ï¼Œåªä½¿ç”¨å¯†é’¥ï¼š<code>PasswordAuthentication no</code> å’Œ <code>PubkeyAuthentication yes</code></li>
            <li>âœ… é™åˆ¶ SSH ç™»å½•ç”¨æˆ·ï¼š<code>AllowUsers runner otheruser</code></li>
            <li>âœ… ä¿®æ”¹ SSH ç«¯å£ï¼ˆå¯é€‰ï¼‰ï¼šå°†é»˜è®¤ 22 æ”¹ä¸ºå…¶ä»–ç«¯å£ï¼Œå‡å°‘è¢«æ‰«æçš„é£é™©</li>
            <li>âœ… é…ç½®å®Œ SSH åé‡å¯ï¼š<code>sudo systemctl restart sshd</code></li>
        </ul>

        <h3>ç½‘ç»œå®‰å…¨</h3>
        <ul>
            <li>âœ… Runner æœºå™¨æ— éœ€æš´éœ²åˆ°å…¬ç½‘ï¼ˆGitHub ä¼šä¸»åŠ¨è¿æ¥åˆ°ä½ çš„æœºå™¨æ˜¯å‡ºç«™è¿æ¥ï¼‰</li>
            <li>âœ… åªå…è®¸å†…ç½‘è®¿é—® SSHï¼ˆå¦‚æœæœºå™¨åœ¨å±€åŸŸç½‘ï¼‰</li>
            <li>âœ… é˜²ç«å¢™é…ç½®ï¼šåªå…è®¸å‡ºç«™ HTTPSï¼ˆ443ï¼‰åˆ° GitHub API å’Œ github.com</li>
            <li>âœ… é˜²ç«å¢™é…ç½®ï¼šå…è®¸è¿›ç«™ SSHï¼ˆç«¯å£ 22 æˆ–è‡ªå®šä¹‰ï¼‰ä»…ä»ä¿¡ä»»çš„ IP</li>
        </ul>

        <h3>ç³»ç»Ÿçº§å®šæœŸç»´æŠ¤</h3>
        <ul>
            <li>âœ… æ¯æœˆæ£€æŸ¥ä¸€æ¬¡ç£ç›˜ç©ºé—´ï¼š<code>df -h</code> å’Œ <code>du -sh /opt/actions-runner/_work</code></li>
            <li>âœ… å¦‚æœå·¥ä½œç›®å½•è¶…è¿‡ 80GBï¼Œæ¸…ç†æ—§çš„æ„å»ºäº§ç‰©ï¼š<code>sudo rm -rf /opt/actions-runner/_work/*</code></li>
            <li>âœ… æ¯å‘¨æ£€æŸ¥ systemd æ—¥å¿—ï¼Œæ’æŸ¥æ½œåœ¨é—®é¢˜ï¼š<code>sudo journalctl -u actions.runner.* -x</code></li>
            <li>âœ… å®šæœŸæ›´æ–° Rocky Linux ç³»ç»Ÿè¡¥ä¸ï¼š<code>sudo yum update -y</code></li>
            <li>âœ… å®šæœŸæ£€æŸ¥ GitHub Runner æ˜¯å¦æœ‰æ–°ç‰ˆæœ¬ï¼ŒåŠæ—¶å‡çº§</li>
            <li>âœ… ç›‘æ§å†…å­˜å ç”¨ï¼Œå¦‚æœç»å¸¸è¶…è¿‡ 80% éœ€è¦è€ƒè™‘å¢åŠ ç¡¬ä»¶æˆ–é™åˆ¶å¹¶å‘ä»»åŠ¡æ•°</li>
            <li>âœ… å»ºç«‹æ—¥å¿—å¤‡ä»½è®¡åˆ’ï¼Œé˜²æ­¢æ—¥å¿—æ–‡ä»¶å æ»¡ç£ç›˜</li>
        </ul>

        <div class="page-break"></div>

        <h2>ğŸ“ è·å–å¸®åŠ©</h2>

        <p><strong>å®˜æ–¹æ–‡æ¡£ï¼š</strong> <a href="https://docs.github.com/en/actions/hosting-your-own-runners/managing-self-hosted-runners/about-self-hosted-runners">GitHub Actions è‡ªæ‰˜ç®¡ Runner æ–‡æ¡£</a></p>

        <p><strong>æ£€æŸ¥æ¸…å•ï¼ˆæœ‰é—®é¢˜æ—¶æ’æŸ¥ï¼‰ï¼š</strong></p>
        <ol>
            <li>GitHub Token æ˜¯å¦è¿‡æœŸæˆ–è¢«åŠé”€ï¼Ÿï¼ˆSettings â†’ Tokensï¼‰</li>
            <li>ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸ï¼Ÿï¼ˆping 8.8.8.8ï¼‰</li>
            <li>SELinux æ˜¯å¦å…³é—­ï¼Ÿï¼ˆgetenforceï¼‰</li>
            <li>Runner ç”¨æˆ·æ˜¯å¦æœ‰ sudo æƒé™ï¼Ÿï¼ˆsudo -u runner sudo whoamiï¼‰</li>
            <li>ç£ç›˜ç©ºé—´æ˜¯å¦å……è¶³ï¼Ÿï¼ˆdf -hï¼‰</li>
            <li>æ˜¯å¦æœ‰é”™åˆ«å­—ï¼Ÿï¼ˆæ£€æŸ¥ GitHub URL å’Œ Tokenï¼‰</li>
        </ol>

        <div class="footer">
            <p>åŸºäºå®é™…éƒ¨ç½²ç»éªŒ | Runner v2.331.0 | Rocky Linux 9.7</p>
            <p>æœ€åæ›´æ–°ï¼š2026å¹´2æœˆ20æ—¥</p>
        </div>
    </div>
</body>
</html>